(() => { (new EventSource("/esbuild")).addEventListener('change', () => location.reload()); })();
import{food_default}from"./chunk-BAWD6CBK.mjs";import{snake_default}from"./chunk-RTHCCALR.mjs";import{areBoxesInCollision}from"./chunk-J7V7N5NL.mjs";import{canvas_default}from"./chunk-2WNCNO4G.mjs";import"./chunk-ZW7GF2WM.mjs";import{dimensions_default}from"./chunk-WE7ZGQYM.mjs";import{point_default}from"./chunk-6GXGR2B5.mjs";var canvas=document.getElementById("game-screen");var ctx=canvas.getContext("2d");var Game=class{constructor(snakeSize){this.animate=()=>{const gameScreen=canvas_default.getInstance();const snake=this.__snake;const food=this.__food;snake.move(10,this.__path,this.__direction);gameScreen.animate(ctx);food.animate(ctx);snake.animate(ctx);const isGameOver=snake.isSnakeHeadCollidingWithBody(this.__direction,this.__path);if(isGameOver){alert("GAME OVER");return}const snakeShouldGrow=this.isSnakeHeadCollidingWithFood();if(snakeShouldGrow){snake.addBody();this.moveFood()}setTimeout(()=>{window.requestAnimationFrame(this.animate)},50)};this.__path="horizontal";this.__direction=1;this.__snake=new snake_default;this.__snakeSize=snakeSize;this.__food=new food_default;this.initialize()}initialize(){const gameScreen=canvas_default.getInstance();const snakeSize=this.__snakeSize;canvas_default.setElement(canvas);this.__snake.setSize(snakeSize.width,snakeSize.height);const gameScreenSize=gameScreen.getSize();const positionX=Math.floor(gameScreenSize.width/2);const positionY=Math.floor(gameScreenSize.height/2);const position=new point_default(positionX,positionY);this.__snake.setPosition(position,"horizontal");this.__snake.setColor("green");this.__food.setColor("blue");this.__food.setSize(this.__snakeSize.width,this.__snakeSize.height)}isSnakeHeadCollidingWithFood(){const snake=this.__snake;const food=this.__food;const snakeHeadPosition=snake.getHeadPosition();const snakeHeadDimensions=snake.getHeadDimensions();const foodPosition=food.getPosition();const foodDimensions=food.getSize();return areBoxesInCollision(snakeHeadDimensions,snakeHeadPosition,foodDimensions,foodPosition)}moveFood(){const gameScreen=canvas_default.getInstance();const gameScreenDimensions=gameScreen.getSize();const foodDimensions=this.__food.getSize();const randomPositionX=Math.floor(Math.random()*(gameScreenDimensions.width-foodDimensions.width));const randomPositionY=Math.floor(Math.random()*(gameScreenDimensions.height-foodDimensions.height));this.__food.setPosition(randomPositionX,randomPositionY)}startGame(){this.moveFood();this.animate()}setPath(path){this.__path=path}setDirection(direction){this.__direction=direction}};var ARROW_DOWN="ArrowDown";var ARROW_UP="ArrowUp";var ARROW_LEFT="ArrowLeft";var ARROW_RIGHT="ArrowRight";window.addEventListener("DOMContentLoaded",()=>{const itemsSize=new dimensions_default(10,10);const game=new Game(itemsSize);game.startGame();window.addEventListener("keydown",e=>{const key=e.key;switch(key){case ARROW_DOWN:game.setPath("vertical");game.setDirection(1);break;case ARROW_UP:game.setPath("vertical");game.setDirection(-1);break;case ARROW_LEFT:game.setPath("horizontal");game.setDirection(-1);break;case ARROW_RIGHT:game.setPath("horizontal");game.setDirection(1);break}})});
